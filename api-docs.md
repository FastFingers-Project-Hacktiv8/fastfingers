# API Documentation

## Authentication

### `POST /login`

Authenticates a user with a username and password.

- **Request Body:**
  - `username` (string, required): The user's username.
  - `password` (string, required): The user's password.
- **Success Response:**
  - Status: `200 OK`
  - Body:
    ```json
    {
      "access_token": "your_jwt_access_token"
    }
    ```
- **Error Responses:**
  - Status: `400 Bad Request`
    - Body: `{"message": "Username and password are required"}` (if **EMPTY_USERNAME_PASSWORD** error)
  - Status: `401 Unauthorized`
    - Body: `{"message": "Invalid credentials"}` (if **INVALID_CREDENTIALS** error)

### `POST /google-login`

Authenticates a user using a Google ID token. If the user does not exist, a new user account will be created.

- **Request Headers:**
  - `google_token` (string, required): The Google ID token.
- **Success Response:**
  - Status: `200 OK`
  - Body:
    ```json
    {
      "access_token": "your_jwt_access_token"
    }
    ```
- **Error Responses:**
  - Status: `400 Bad Request`
    - Body: `{"message": "Google access token is required"}` (if **EMPTY_GOOGLE_ACCESS_TOKEN** error)
  - Status: `500 Internal Server Error` (for issues with Google token verification or user creation)

### `POST /register`

Registers a new user account.

- **Request Body:**
  - `username` (string, required): The desired username for the new account.
  - `email` (string, required): The user's email address.
  - `password` (string, required): The desired password for the new account.
- **Success Response:**
  - Status: `201 Created`
  - Body:
    ```json
    {
      "id": 1,
      "username": "newuser",
      "email": "newuser@example.com",
      "imageUrl": null
    }
    ```
- **Error Responses:**
  - Status: `400 Bad Request`
    - Body: `{"message": "Username, email, and password are required"}` (if **EMPTY_USERNAME_EMAIL_PASSWORD** error)
  - Status: `409 Conflict` (if a user with the provided username or email already exists)
  - Status: `500 Internal Server Error` (for other registration errors)

---

## User Management and Data Retrieval

### `GET /leaderboard`

Retrieves a list of all users, ordered by their **cpm** (characters per minute) in descending order.

- **Success Response:**
  - Status: `200 OK`
  - Body:
    ```json
    [
      {
        "id": 1,
        "username": "user1",
        "email": "user1@example.com",
        "imageUrl": "[http://example.com/image1.jpg](http://example.com/image1.jpg)",
        "cpm": 120
      },
      {
        "id": 2,
        "username": "user2",
        "email": "user2@example.com",
        "imageUrl": null,
        "cpm": 100
      }
    ]
    ```
- **Error Responses:**
  - Status: `500 Internal Server Error`

### `PATCH /user/:id`

Updates a user's **cpm** (characters per minute) by their ID.

- **URL Parameters:**
  - `id` (integer, required): The ID of the user to update.
- **Request Body:**
  - `cpm` (integer, required): The new CPM value for the user.
- **Success Response:**
  - Status: `200 OK`
  - Body:
    ```json
    {
      "id": 1,
      "username": "user1",
      "email": "user1@example.com",
      "imageUrl": "[http://example.com/image1.jpg](http://example.com/image1.jpg)",
      "cpm": 150
    }
    ```
- **Error Responses:**
  - Status: `400 Bad Request`
    - Body: `{"message": "CPM is required"}` (if **EMPTY_CPM** error)
  - Status: `404 Not Found`
    - Body: `{"message": "User not found"}` (if **INVALID_ID** error)
  - Status: `500 Internal Server Error`

### `GET /random-words`

Generates and retrieves a set of random words.

- **Success Response:**
  - Status: `200 OK`
  - Body:
    ```json
    {
      "text": "random words generated by the AI"
    }
    ```
- **Error Responses:**
  - Status: `500 Internal Server Error` (if there's an issue with generating words)
